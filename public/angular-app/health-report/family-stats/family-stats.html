<style>
    svg {
        font: 10px sans-serif;
    }

    .background path {
        fill: none;
        stroke: #ddd;
    }

    .foreground path {
        fill: none;
        stroke: steelblue;
    }

    .brush .extent {
        fill-opacity: .3;
        stroke: #fff;
        shape-rendering: crispEdges;
    }
    .axis line,
    .axis path {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
    }

    .axis text {
        fill: black;
        text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;
        /*cursor: move;*/
    }
</style>

<div class="container-fluid">
    <div class="row">
        <div class="panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">Families Health Score:</h4>
                </div>
                <div class="panel-collapse">
                    <div class="panel-body">
                        <div class="col-md-3">
                            <d3-circle data="vm.FamilyData.scoreData" class="cn"></d3-circle>
                        </div>
                        <div class="col-md-4">
                            <div class="small">
                                <p>
                                    {{vm.FamilyData.description}}
                                </p>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div id="menu">
                                <div class="panel list-group">
                                    <a href="" class="list-group-item" data-toggle="collapse" data-target="#sm" data-parent="#menu">
                                        Unplaced Families
                                        <span ng-class="vm.FamilyData.unusedFamilies <= 10
                                ? 'badge progress-bar-success'
                                : vm.FamilyData.unusedFamilies > 10 && vm.FamilyData.unusedFamilies <= 20
                                ? 'badge progress-bar-warning'
                                : 'badge progress-bar-danger' ">{{vm.FamilyData.unusedFamilies}}</span>
                                    </a>
                                    <div id="sm" class="sublinks collapse">
                                        <div class="list-group-item small">
                                            Families are integral part of Revit project. However, unused/unplaced Families unnecessarily bloat file size
                                            and degrade performance. Less than 10 is green, more than 10 but less than 20 is orange while more than 20 is red.
                                        </div>
                                    </div>
                                    <a href="" class="list-group-item" data-toggle="collapse" data-target="#sl" data-parent="#menu">
                                        InPlace Families
                                        <span ng-class="vm.FamilyData.inPlaceFamilies <= 5
                                ? 'badge progress-bar-success'
                                : vm.FamilyData.inPlaceFamilies > 5 && vm.FamilyData.inPlaceFamilies <= 10
                                ? 'badge progress-bar-warning'
                                : 'badge progress-bar-danger' ">{{vm.FamilyData.inPlaceFamilies}}</span>
                                    </a>
                                    <div id="sl" class="sublinks collapse">
                                        <div class="list-group-item small">
                                            Usage of InPlace families should be limited to minimum possible. InPlace Families cannot be scheduled, hence limited in traditional
                                            usage. They are also constrained to given model, and cannot be reused on other projects.
                                        </div>
                                    </div>
                                    <a href="" class="list-group-item" data-toggle="collapse" data-target="#s2" data-parent="#menu">
                                        Misnamed Families
                                        <span ng-class="vm.FamilyData.misnamed <= 10
                                ? 'badge progress-bar-success'
                                : vm.FamilyData.misnamed > 10 && vm.FamilyData.misnamed <= 20
                                ? 'badge progress-bar-warning'
                                : 'badge progress-bar-danger'">{{vm.FamilyData.misnamed}}</span>
                                    </a>
                                    <div id="s2" class="sublinks collapse">
                                        <div class="list-group-item small">
                                            It's considered good practive to use HOK created and curated families. These families will typically have a name containing "_HOK" in it.
                                            Family naming has no performance impact, but is good practice that should be followed. Less than 10 is green, more than 10 but less
                                            than 20 is orange while more than 20 is red.
                                        </div>
                                    </div>
                                    <a href="" class="list-group-item" data-toggle="collapse" data-target="#s3" data-parent="#menu">
                                        Oversized Families
                                        <span ng-class="vm.FamilyData.oversizedFamilies <= 10
                                ? 'badge progress-bar-success'
                                : vm.FamilyData.oversizedFamilies > 10 && vm.FamilyData.oversizedFamilies <= 20
                                ? 'badge progress-bar-warning'
                                : 'badge progress-bar-danger'">{{vm.FamilyData.oversizedFamilies}}</span>
                                    </a>
                                    <div id="s3" class="sublinks collapse">
                                        <div class="list-group-item small">
                                            Anything over 1MB will be considered oversized. Large families can be a good indicator of mismodelled or families with imported
                                            CAD objects. Generally it's a good idea to keep Family file size low. Less than 10 is green, more than 10 but less than 20 is orange while more than 20 is red.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class=" btn-group btn-group-xs pull-right" role="group" aria-hidden="true">
                        <button type="button" ng-class="vm.SelectedYear === '2016' ? 'btn btn-primary' : 'btn btn-primary'" ng-click="vm.FilterTable()">Filter</button>
                    </div>
                    <h4 class="panel-title" style="padding-top: 5px;">Select: Filter Families by Multiple Parameters.</h4>
                </div>
                <div class="panel-collapse">
                    <div class="panel-body">
                        <d3-parallel-coordinates data="vm.pcoordinatesData" format-value="vm.formatValue(item)" d3-on-brush="vm.OnBrush(item)"></d3-parallel-coordinates>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="panel-group" id="p1">
            <div class="panel panel-default">
                <div class="panel-heading panel-heading-clickable" data-toggle="collapse" data-parent="#p1" data-target="#collapseP1">
                    <p class="pull-right textAlignMiddle"><span class="glyphicon glyphicon-stop" style="color: #F0AD4E"></span> 2/3 Fail</p>
                    <p class="pull-right textAlignMiddle"><span class="glyphicon glyphicon-stop" style="color: #D9534F"></span> All checks Fail</p>
                    <h4 class="panel-title">Family Checks: no placed instances, >1MB size, misnamed</h4>
                </div>
                <div id="collapseP1" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <table id="table1" datatable="ng" dt-options="vm.dtOptions" dt-column-defs="vm.dtColumnDefs" class="table table-hover table-condensed datatable">
                            <thead>
                            <tr>
                                <th class="col-md-1 text-center">#</th>
                                <th class="col-md-9">Name</th>
                                <th class="col-md-1 text-center">Qty.</th>
                                <th class="col-md-1 text-center">Size</th>
                                <th>Size Value</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="i in vm.AllFamilies | orderBy: 'name' : false" ng-class="vm.evaluateFamily(i) == 3 ? 'bg-danger' : vm.evaluateFamily(i) == 2 ? 'bg-warning' : 'table-info'">
                                <td class="text-center">{{$index}}</td>
                                <td ng-mouseenter="onHover = true" ng-mouseleave="onHover = false">
                                    <p ng-class="vm.evaluateName(i) ? 'normal' : 'thick'">
                                        {{i.name}}
                                        <a href="">
                                            <span ng-show="i.tasks.length > 0 || onHover" class="glyphicon glyphicon-tasks" ng-click="vm.launchEditor(i)"></span>
                                        </a>
                                    </p>
                                </td>
                                <td class="text-center"><p ng-class="vm.evaluateInstances(i) ? 'normal' : 'thick'">{{i.instances}}</p></td>
                                <td class="text-center"><p ng-class="vm.evaluateSize(i) ? 'normal' : 'thick'">{{i.size}}</p></td>
                                <td class="text-center">{{i.sizeValue}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>